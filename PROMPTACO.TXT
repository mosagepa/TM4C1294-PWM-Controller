

Hello. Without touching the inner mechanics of the UART handlers and interrupt system, tell me how could I solve the following issue:

-The user enters a' PSYN n' command over UART3, then on UART0 we'll see some debug diagnostics (memory regions, proofs of allocation sanity, etc). Then over UART3, the user will need an additional ENTER keypress to "clean" properly the command line in the UIART. I want to know why this requirement, and how we can simplify or fix the UART loop (more properly the parsing mechanics) so that the prompt appears again cleanly and ready for next command just after the first ENTER for the previoous command, as it should be in a properly designed cmdline interaction.  I've also noticed that SESSION DISCONNECTED message is not issued on UART0 as a diagnostic, AFTER a real UART3 disconnect (session closed on UART3), but it appears on UART0 if we press ENTER *on the UART0*.  I want to elliminate this "ENTER requirement" in the UART0 loop so that the disconnect detected on the DTR line UART3-->UART0 is properly acknowledged with the said printed SESSION DISCONNECTED message, immediately upob such event. I guess there might be just a "press any key" behavior on UART0 now, after the diagnostics prinouts for the memory checks, and that might be preventing the SESSION DISCONNECT to show until we press ENTER on UART0.  Can you investigate this in order to prevent such required additional ENTER needs, on both UART0 and UART3?  As I said, as you proceed please do your best efforts NOT to change the interrupt schema and overall design NEITHER the low-level UART char handling vector handlers, ok?

